<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>Docs For Class FormSpamCheck</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
			<div class="page-body">			
<h2 class="class-name">Class FormSpamCheck</h2>

<a name="sec-description"></a>
<div class="info-box">
	<div class="info-box-title">Description</div>
	<div class="nav-bar">
					<span class="disabled">Description</span> |
													<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
						|											<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
						
					</div>
	<div class="info-box-body">
        		<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">FormspamCheck class, centralised spam protection</p>
<p class="description"><p>Check form submission against multipe spam protection sources</p><p>Currently supported:</p><p>StopForumSpam: http://www.stopforumspam.com</p><p>Project Honeypot: http://www.projecthoneypot.org</p><p>Akismet: http://www.akismet.com</p></p>
		<p class="notes">
			Located in <a class="field" href="_formspamcheck.class.php.html">/formspamcheck.class.php</a> (line <span class="field">44</span>)
		</p>
		
				
		<pre></pre>
	
			</div>
</div>



	<a name="sec-var-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Variable Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
						<span class="disabled">Vars</span> (<a href="#sec-vars">details</a>)
							| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
								</div>
		<div class="info-box-body">
			<div class="var-summary">
																																																<div class="var-title">
					<span class="var-type">mixed</span>
					<a href="#$isSpam" title="details" class="var-name">$isSpam</a>
				</div>
																<div class="var-title">
					<span class="var-type">mixed</span>
					<a href="#$matchDetails" title="details" class="var-name">$matchDetails</a>
				</div>
																<div class="var-title">
					<span class="var-type">mixed</span>
					<a href="#$matchedBy" title="details" class="var-name">$matchedBy</a>
				</div>
																<div class="var-title">
					<span class="var-type">mixed</span>
					<a href="#$matchedOn" title="details" class="var-name">$matchedOn</a>
				</div>
											</div>
		</div>
	</div>

	<a name="sec-method-summary"></a>
	<div class="info-box">
		<div class="info-box-title">Method Summary</span></div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
																		<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
				 
				|
						<span class="disabled">Methods</span> (<a href="#sec-methods">details</a>)
		</div>
		<div class="info-box-body">			
			<div class="method-summary">
																																																												
												<div class="method-definition">
											<span class="method-result">FormSpamCheck</span>
										<a href="#__construct" title="details" class="method-name">__construct</a>
											([<span class="var-type">string</span>&nbsp;<span class="var-name">$hpKey</span> = <span class="var-default">''</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$akismetKey</span> = <span class="var-default">''</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$akismetUrl</span> = <span class="var-default">''</span>])
									</div>
																<div class="method-definition">
											<span class="method-result">bool:</span>
										<a href="#akismetCheck" title="details" class="method-name">akismetCheck</a>
											(<span class="var-type">array</span>&nbsp;<span class="var-name">$data</span>)
									</div>
																<div class="method-definition">
											<span class="method-result">bool</span>
										<a href="#honeypotCheck" title="details" class="method-name">honeypotCheck</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$ip</span>)
									</div>
																<div class="method-definition">
											<span class="method-result">integer</span>
										<a href="#isSpam" title="details" class="method-name">isSpam</a>
											(<span class="var-type">array</span>&nbsp;<span class="var-name">$data</span>, [<span class="var-type">bool</span>&nbsp;<span class="var-name">$checkAll</span> = <span class="var-default">false</span>])
									</div>
																<div class="method-definition">
											<span class="method-result">bool</span>
										<a href="#setLogRoot" title="details" class="method-name">setLogRoot</a>
											(<span class="var-type">string</span>&nbsp;<span class="var-name">$dir</span>)
									</div>
																<div class="method-definition">
											<span class="method-result">null</span>
										<a href="#setSFSSpamTriggers" title="details" class="method-name">setSFSSpamTriggers</a>
											([<span class="var-type">array</span>&nbsp;<span class="var-name">$triggers</span> = <span class="var-default">array()</span>])
									</div>
																<div class="method-definition">
											<span class="method-result">integer</span>
										<a href="#stopForumSpamCheck" title="details" class="method-name">stopForumSpamCheck</a>
											([<span class="var-type">array</span>&nbsp;<span class="var-name">$data</span> = <span class="var-default">array()</span>])
									</div>
								</div>
		</div>
	</div>		

	<a name="sec-vars"></a>
	<div class="info-box">
		<div class="info-box-title">Variables</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
										<a href="#sec-var-summary">Vars</a> (<span class="disabled">details</span>)
						
			
										| 
									<a href="#sec-method-summary">Methods</a> (<a href="#sec-methods">details</a>)
							
					</div>
		<div class="info-box-body">
			<a name="var$isSpam" id="$isSpam"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$isSpam</span>
			 = <span class="var-default"> false</span>			(line <span class="line-number">83</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">(bool) isSpam - flag indicating spam (true) or ham (false) after running any spamcheck</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	
		
		

</div>
<a name="var$matchDetails" id="$matchDetails"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$matchDetails</span>
			 = <span class="var-default"> ''</span>			(line <span class="line-number">66</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">(array) matchDetails - further details on a match provided by SFS</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	
		
		

</div>
<a name="var$matchedBy" id="$matchedBy"><!-- --></A>
<div class="evenrow">

	<div class="var-header">
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$matchedBy</span>
			 = <span class="var-default"> ''</span>			(line <span class="line-number">72</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">(string) matchedBy - which service returned the match when isSpam returns true</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	
		
		

</div>
<a name="var$matchedOn" id="$matchedOn"><!-- --></A>
<div class="oddrow">

	<div class="var-header">
		<span class="var-title">
			<span class="var-type">mixed</span>
			<span class="var-name">$matchedOn</span>
			 = <span class="var-default"> ''</span>			(line <span class="line-number">78</span>)
		</span>
	</div>

	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">(string) matchedOn - what field was matched when isSpam returns true</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	
		
		

</div>
						
		</div>
	</div>
	
	<a name="sec-methods"></a>
	<div class="info-box">
		<div class="info-box-title">Methods</div>
		<div class="nav-bar">
			<a href="#sec-description">Description</a> |
															<a href="#sec-var-summary">Vars</a> (<a href="#sec-vars">details</a>)
																	<a href="#sec-method-summary">Methods</a> (<span class="disabled">details</span>)
						
		</div>
		<div class="info-box-body">
			<A NAME='method_detail'></A>

<a name="method__construct" id="__construct"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">Constructor __construct</span> (line <span class="line-number">134</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">constructor</p>
	<ul class="tags">
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">FormSpamCheck</span>
		<span class="method-name">
			__construct
		</span>
					([<span class="var-type">string</span>&nbsp;<span class="var-name">$hpKey</span> = <span class="var-default">''</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$akismetKey</span> = <span class="var-default">''</span>], [<span class="var-type">string</span>&nbsp;<span class="var-name">$akismetUrl</span> = <span class="var-default">''</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$hpKey</span><span class="var-description">: - API key for Honeypot Project</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$akismetKey</span><span class="var-description">: - API key for Akismet service</span>			</li>
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$akismetUrl</span><span class="var-description">: - BlogURL for Akismet service</span>			</li>
				</ul>
		
			
	</div>
<a name="methodakismetCheck" id="akismetCheck"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">akismetCheck</span> (line <span class="line-number">326</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">akismetCheck - check data against akismet</p>
	<ul class="tags">
				<li><span class="field">return:</span> true is spam, false is ham</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">bool:</span>
		<span class="method-name">
			akismetCheck
		</span>
					(<span class="var-type">array</span>&nbsp;<span class="var-name">$data</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$data</span><span class="var-description">: <p>- associative array with data to use for checking</p><p>possible keys for data (all optional): blog, user_ip, user_agent, referrer, permalink, comment_type, comment_author, comment_author_email, comment_author_url, comment_content</p></span>			</li>
				</ul>
		
			
	</div>
<a name="methodhoneypotCheck" id="honeypotCheck"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">honeypotCheck</span> (line <span class="line-number">264</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">honeypotCheck - verify IP using Honeypot project</p>
	<ul class="tags">
				<li><span class="field">return:</span> - true is spam, false is ham</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">bool</span>
		<span class="method-name">
			honeypotCheck
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$ip</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$ip</span><span class="var-description">: - IP address to check</span>			</li>
				</ul>
		
			
	</div>
<a name="methodisSpam" id="isSpam"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">isSpam</span> (line <span class="line-number">640</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">isSpam - match submission against spam protection sources</p>
	<ul class="tags">
				<li><span class="field">return:</span> - number of services that returned &quot;spam&quot; status. If checkAll is false will be 0 or 1</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">integer</span>
		<span class="method-name">
			isSpam
		</span>
					(<span class="var-type">array</span>&nbsp;<span class="var-name">$data</span>, [<span class="var-type">bool</span>&nbsp;<span class="var-name">$checkAll</span> = <span class="var-default">false</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$data</span><span class="var-description">: <p>- array containing information  structure:</p><p>$data['email'] = (string) email address</p><p>$data['username'] = (string) username</p><p>$data['ips'] = array ('ip1','ip2')</p><p>$data['user_agent'] = (string) Browser Agent</p><p>$data['referrer'] = (string) referring URL</p><p>$data['content'] = (string) Other content</p></span>			</li>
					<li>
				<span class="var-type">bool</span>
				<span class="var-name">$checkAll</span><span class="var-description">: <p>- continue checking other services</p><p>true - check against all services</p><p>false - only check next service if previous one returned ham</p></span>			</li>
				</ul>
		
			
	</div>
<a name="methodsetLogRoot" id="setLogRoot"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">setLogRoot</span> (line <span class="line-number">202</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">setLogRoot - specify where to write logfiles</p>
	<ul class="tags">
				<li><span class="field">return:</span> - true is successful</li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">bool</span>
		<span class="method-name">
			setLogRoot
		</span>
					(<span class="var-type">string</span>&nbsp;<span class="var-name">$dir</span>)
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">string</span>
				<span class="var-name">$dir</span><span class="var-description">: - directory where to write to, defaults to /var/log/formspam</span>			</li>
				</ul>
		
			
	</div>
<a name="methodsetSFSSpamTriggers" id="setSFSSpamTriggers"><!-- --></a>
<div class="oddrow">
	
	<div class="method-header">
		<span class="method-title">setSFSSpamTriggers</span> (line <span class="line-number">486</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">setSFSSpamTriggers - set StopForumSpam triggers, if you want to be more specific on the triggers</p>
	<ul class="tags">
				<li><span class="field">return:</span> <p>defaults to:</p><p>array (</p><p>'username' =&gt; array (               // ban on username</p><p>'ban_end' =&gt; FALSE,               // Permanent ban</p><p>'freq_tolerance' =&gt; 2,            // allow when 2 or less in the frequency API field</p><p>'ban_reason' =&gt; 'Error processing data, please try again', ## let's not make them any wiser</p><p>),</p><p>'email' =&gt; array (                  // ban on email</p><p>'ban_end' =&gt; FALSE,               // Permanent ban</p><p>'freq_tolerance' =&gt; 0,</p><p>'ban_reason' =&gt; 'Error processing data, please try again', ## let's not make them any wiser</p><p>),</p><p>'ip' =&gt; array (                     // ban on ip address</p><p>'ban_end' =&gt; 630000,              // 60*60*24*7 ban for 7 days</p><p>'freq_tolerance' =&gt; 1,</p><p>'ban_reason' =&gt; 'Error processing data, please try again', ## let's not make them any wiser</p><p>)</p><p>);</p></li>
				<li><span class="field">access:</span> public</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">null</span>
		<span class="method-name">
			setSFSSpamTriggers
		</span>
					([<span class="var-type">array</span>&nbsp;<span class="var-name">$triggers</span> = <span class="var-default">array()</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$triggers</span><span class="var-description">: array with details for SFS triggers</span>			</li>
				</ul>
		
			
	</div>
<a name="methodstopForumSpamCheck" id="stopForumSpamCheck"><!-- --></a>
<div class="evenrow">
	
	<div class="method-header">
		<span class="method-title">stopForumSpamCheck</span> (line <span class="line-number">509</span>)
	</div> 
	
	<!-- ========== Info from phpDoc block ========= -->
<p class="short-description">stopForumSpamCheck - check using the SFS API</p>
	<ul class="tags">
				<li><span class="field">return:</span> - number of times something was matched</li>
			</ul>
	
	<div class="method-signature">
		<span class="method-result">integer</span>
		<span class="method-name">
			stopForumSpamCheck
		</span>
					([<span class="var-type">array</span>&nbsp;<span class="var-name">$data</span> = <span class="var-default">array()</span>])
			</div>
	
			<ul class="parameters">
					<li>
				<span class="var-type">array</span>
				<span class="var-name">$data</span><span class="var-description">: <p>- array containing data to check</p><p>needs to contain at least one of</p><p>$data['username'] - (string) username to check</p><p>$data['ips'] - (array) list of IPs to check</p><p>$data['email'] - (string) email to check</p></span>			</li>
				</ul>
		
			
	</div>
						
		</div>
	</div>


	<p class="notes" id="credit">
		Documentation generated on Mon, 05 Sep 2011 13:35:09 -0300 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</div></body>
</html>